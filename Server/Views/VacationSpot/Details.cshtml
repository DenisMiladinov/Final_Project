@model Models.VacationSpot
@{
    Layout = "_Layout";
    ViewData["Title"] = Model.Title;
}

@section Styles {
    <link rel="stylesheet" href="~/css/Views/VacationSpot/Details.css" asp-append-version="true" />
}

<section class="spot-details">
    <div class="spot-details__container">
        <div class="spot-details__gallery">
            <img src="@(Url.Content($"~/assets/Spots/{Model.Images.First().ImageUrl.Split('/').Last()}"))" alt="@Model.Title" class="spot-details__main-img" />
            <div class="spot-details__thumbs">
                @foreach (var img in Model.Images)
                {
                    <img src="@(Url.Content($"~/assets/Spots/{img.ImageUrl.Split('/').Last()}"))"
                         class="spot-details__thumb"
                         data-src="@(Url.Content($"~/assets/Spots/{img.ImageUrl.Split('/').Last()}"))" />
                }
            </div>
        </div>

        <div class="spot-details__info">
            <h1 class="spot-details__title">@Model.Title</h1>
            <p class="spot-details__location">@Model.Location</p>
            <p class="spot-details__price">@Model.PricePerNight lv per night</p>
            <a asp-action="Index" asp-controller="VacationSpot" class="btn btn--back">← Back to list</a>
            <a asp-controller="Booking"
               asp-action="Checkout"
               asp-route-spotId="@Model.SpotId"
               class="btn btn--book">
                Book now →
            </a>


            <div class="spot-details__description">
                <h2>Description</h2>
                <p>@Model.Description</p>
            </div>
        </div>
    </div>
</section>

@section Scripts {
    <script>
        (function(){
            const main = document.querySelector('.spot-details__main-img');
            document.querySelectorAll('.spot-details__thumb').forEach(thumb => {
                thumb.addEventListener('click', () => {
                    main.src = thumb.getAttribute('data-src');
                });
            });
        })();
    </script>
}
